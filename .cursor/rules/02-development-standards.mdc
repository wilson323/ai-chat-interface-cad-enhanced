---
alwaysApply: true
---

# ZK-Agent å¼€å‘è§„èŒƒä¸ä»£ç è´¨é‡æ ‡å‡†

## ğŸ“‹ æ ¸å¿ƒå¼€å‘åŸåˆ™

åŸºäº [ä»£ç ä¸€è‡´æ€§æ ‡å‡†](.kiro/specs/code-consistency-standards.md) å’Œ [å¼€å‘è§„èŒƒ](.kiro/steering/development-standards.md)ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚

### è´¨é‡æ ‡å‡†
- **é›¶å¼‚å¸¸åŸåˆ™**: æ‰€æœ‰ä»£ç å¿…é¡»æœ‰å®Œå–„çš„å¼‚å¸¸å¤„ç†
- **ç±»å‹å®‰å…¨**: TypeScriptä¸¥æ ¼æ¨¡å¼ï¼ŒPythonç±»å‹æ³¨è§£
- **æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•â‰¥80%ï¼Œé›†æˆæµ‹è¯•â‰¥60%ï¼Œå…³é”®è·¯å¾„â‰¥90%
- **ä»£ç å®¡æŸ¥**: æ‰€æœ‰ä»£ç å¿…é¡»é€šè¿‡åŒè¡Œè¯„å®¡

### æ€§èƒ½è¦æ±‚
- **å“åº”æ—¶é—´**: APIå“åº”<200msï¼Œé¡µé¢åŠ è½½<2s
- **å¹¶å‘å¤„ç†**: æ”¯æŒ1000+å¹¶å‘ç”¨æˆ·
- **èµ„æºä¼˜åŒ–**: å†…å­˜ä½¿ç”¨<80%ï¼ŒCPUä½¿ç”¨<70%

## ğŸ Pythonå¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼è§„èŒƒ
```python
# âœ… æ­£ç¡®çš„å‡½æ•°å®šä¹‰ä¸æ³¨é‡Š
def process_user_data(
    user_id: str,
    data: Dict[str, Any],
    options: Optional[ProcessingOptions] = None
) -> ProcessingResult:
    """å¤„ç†ç”¨æˆ·æ•°æ®å¹¶è¿”å›å¤„ç†ç»“æœ

    è¯¥å‡½æ•°è´Ÿè´£å¯¹è¾“å…¥çš„ç”¨æˆ·æ•°æ®è¿›è¡Œæ¸…æ´—ã€éªŒè¯å’Œè½¬æ¢å¤„ç†ã€‚

    Args:
        user_id: ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
        data: å¾…å¤„ç†çš„ç”¨æˆ·æ•°æ®å­—å…¸
            - name: ç”¨æˆ·å§“å
            - email: ç”¨æˆ·é‚®ç®±
            - preferences: ç”¨æˆ·åå¥½è®¾ç½®
        options: å¯é€‰çš„å¤„ç†é…ç½®å‚æ•°

    Returns:
        ProcessingResult: åŒ…å«å¤„ç†ç»“æœå’ŒçŠ¶æ€ä¿¡æ¯
            - success: å¤„ç†æ˜¯å¦æˆåŠŸ
            - data: å¤„ç†åçš„æ•°æ®
            - errors: é”™è¯¯ä¿¡æ¯åˆ—è¡¨

    Raises:
        ValueError: å½“è¾“å…¥æ•°æ®æ ¼å¼ä¸æ­£ç¡®æ—¶æŠ›å‡º
        ValidationError: å½“æ•°æ®éªŒè¯å¤±è´¥æ—¶æŠ›å‡º
        ProcessingError: å½“å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡º

    Examples:
        >>> result = process_user_data(
        ...     "user-123",
        ...     {"name": "å¼ ä¸‰", "email": "zhangsan@example.com"}
        ... )
        >>> print(result.success)
        True
    """
    try:
        # è¾“å…¥éªŒè¯
        if not user_id or not isinstance(user_id, str):
            raise ValueError("ç”¨æˆ·IDå¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²")

        # æ•°æ®å¤„ç†é€»è¾‘
        processed_data = _clean_and_validate_data(data)

        return ProcessingResult(
            success=True,
            data=processed_data,
            errors=[]
        )
    except Exception as e:
        logger.error(f"å¤„ç†ç”¨æˆ·æ•°æ®å¤±è´¥: {user_id}, é”™è¯¯: {str(e)}")
        raise ProcessingError(f"æ•°æ®å¤„ç†å¤±è´¥: {str(e)}") from e
```

### æ–‡ä»¶å‘½åè§„èŒƒ
```python
# âœ… æ­£ç¡®çš„æ–‡ä»¶å‘½å
user_service.py          # ç”¨æˆ·æœåŠ¡
auth_middleware.py       # è®¤è¯ä¸­é—´ä»¶
database_manager.py      # æ•°æ®åº“ç®¡ç†å™¨
ai_model_adapter.py      # AIæ¨¡å‹é€‚é…å™¨
fastgpt_client.py        # FastGPTå®¢æˆ·ç«¯

# âŒ é”™è¯¯çš„æ–‡ä»¶å‘½å
UserService.py           # ä¸ä½¿ç”¨å¤§é©¼å³°
authMiddleware.py        # ä¸ä½¿ç”¨å°é©¼å³°
db-manager.py           # ä¸ä½¿ç”¨è¿å­—ç¬¦
aiModel.py              # ç¼ºä¹æè¿°æ€§
```

### å¼‚æ­¥ç¼–ç¨‹è§„èŒƒ
```python
# âœ… æ­£ç¡®çš„å¼‚æ­¥å‡½æ•°å®šä¹‰
async def fetch_user_profile(user_id: str) -> Optional[UserProfile]:
    """å¼‚æ­¥è·å–ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯"""
    try:
        async with httpx.AsyncClient() as client:
            response = await client.get(f"/users/{user_id}")
            response.raise_for_status()
            return UserProfile(**response.json())
    except httpx.HTTPError as e:
        logger.error(f"è·å–ç”¨æˆ·æ¡£æ¡ˆå¤±è´¥: {user_id}, é”™è¯¯: {str(e)}")
        return None
    except Exception as e:
        logger.error(f"æœªçŸ¥é”™è¯¯: {str(e)}")
        raise
```

## ğŸ“œ TypeScriptå¼€å‘è§„èŒƒ

### ç±»å‹å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„æ¥å£å®šä¹‰
interface UserProfile {
  readonly id: string;
  name: string;
  email: string;
  avatar?: string;
  preferences: UserPreferences;
  createdAt: Date;
  updatedAt: Date;
}

// âœ… æ­£ç¡®çš„è”åˆç±»å‹å®šä¹‰
type AgentStatus = 'idle' | 'processing' | 'error' | 'completed';
type EventHandler<T = any> = (event: T) => void | Promise<void>;

// âœ… æ­£ç¡®çš„æ³›å‹å®šä¹‰
interface ApiResponse<T> {
  success: boolean;
  data: T;
  error?: string;
  timestamp: number;
}
```

### å‡½æ•°å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„å‡½æ•°å®šä¹‰ä¸æ³¨é‡Š
/**
 * å¼‚æ­¥è·å–ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯
 *
 * @param userId - ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
 * @param options - å¯é€‰çš„è·å–é…ç½®
 * @returns Promise<UserProfile | null> - ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯æˆ–null
 *
 * @example
 * ```typescript
 * const profile = await fetchUserProfile('user-123');
 * if (profile) {
 *   console.log(profile.name);
 * }
 * ```
 */
async function fetchUserProfile(
  userId: string,
  options?: FetchOptions
): Promise<UserProfile | null> {
  try {
    const response = await apiClient.get<UserProfile>(`/users/${userId}`, options);
    return response.data;
  } catch (error) {
    console.error('Failed to fetch user profile:', error);
    return null;
  }
}
```

### ç»„ä»¶å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„Reactç»„ä»¶å®šä¹‰
interface UserCardProps {
  user: UserProfile;
  onEdit?: (user: UserProfile) => void;
  onDelete?: (userId: string) => void;
  className?: string;
}

/**
 * ç”¨æˆ·å¡ç‰‡ç»„ä»¶
 *
 * æ˜¾ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ”¯æŒç¼–è¾‘å’Œåˆ é™¤æ“ä½œ
 */
export default function UserCard({
  user,
  onEdit,
  onDelete,
  className
}: UserCardProps) {
  const handleEdit = useCallback(() => {
    onEdit?.(user);
  }, [user, onEdit]);

  const handleDelete = useCallback(() => {
    onDelete?.(user.id);
  }, [user.id, onDelete]);

  return (
    <div className={cn("user-card", className)}>
      <div className="user-avatar">
        <Image
          src={user.avatar || '/default-avatar.png'}
          alt={`${user.name}çš„å¤´åƒ`}
          width={64}
          height={64}
        />
      </div>
      <div className="user-info">
        <h3 className="user-name">{user.name}</h3>
        <p className="user-email">{user.email}</p>
      </div>
      <div className="user-actions">
        {onEdit && (
          <Button onClick={handleEdit} variant="outline" size="sm">
            ç¼–è¾‘
          </Button>
        )}
        {onDelete && (
          <Button onClick={handleDelete} variant="destructive" size="sm">
            åˆ é™¤
          </Button>
        )}
      </div>
    </div>
  );
}
```

## ğŸ“ æ³¨é‡Šä¸æ–‡æ¡£è§„èŒƒ

### å‡½æ•°çº§æ³¨é‡Šè¦æ±‚
```python
def complex_algorithm(
    input_data: List[Dict[str, Any]],
    config: AlgorithmConfig,
    callback: Optional[Callable[[str], None]] = None
) -> AlgorithmResult:
    """å¤æ‚ç®—æ³•å¤„ç†å‡½æ•°

    è¯¥å‡½æ•°å®ç°äº†ä¸€ä¸ªå¤šæ­¥éª¤çš„æ•°æ®å¤„ç†ç®—æ³•ï¼ŒåŒ…æ‹¬æ•°æ®é¢„å¤„ç†ã€
    æ ¸å¿ƒç®—æ³•æ‰§è¡Œå’Œç»“æœåå¤„ç†ã€‚

    ç®—æ³•æ­¥éª¤ï¼š
    1. æ•°æ®éªŒè¯å’Œæ¸…æ´—
    2. ç‰¹å¾æå–å’Œè½¬æ¢
    3. æ ¸å¿ƒç®—æ³•è®¡ç®—
    4. ç»“æœèšåˆå’Œæ ¼å¼åŒ–

    Args:
        input_data: è¾“å…¥æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
            - id: æ•°æ®å”¯ä¸€æ ‡è¯†
            - values: æ•°å€¼æ•°ç»„
            - metadata: å…ƒæ•°æ®å­—å…¸
        config: ç®—æ³•é…ç½®å¯¹è±¡
            - algorithm_type: ç®—æ³•ç±»å‹ ('fast' | 'accurate')
            - threshold: é˜ˆå€¼å‚æ•° (0.0-1.0)
            - max_iterations: æœ€å¤§è¿­ä»£æ¬¡æ•°
        callback: å¯é€‰çš„è¿›åº¦å›è°ƒå‡½æ•°

    Returns:
        AlgorithmResult: ç®—æ³•æ‰§è¡Œç»“æœ
            - processed_data: å¤„ç†åçš„æ•°æ®
            - metrics: æ€§èƒ½æŒ‡æ ‡
            - execution_time: æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰

    Raises:
        ValueError: å½“è¾“å…¥æ•°æ®æ ¼å¼æ— æ•ˆæ—¶
        AlgorithmError: å½“ç®—æ³•æ‰§è¡Œå¤±è´¥æ—¶
        TimeoutError: å½“æ‰§è¡Œè¶…æ—¶æ—¶

    Examples:
        >>> config = AlgorithmConfig(
        ...     algorithm_type='fast',
        ...     threshold=0.8,
        ...     max_iterations=100
        ... )
        >>> data = [{'id': '1', 'values': [1, 2, 3], 'metadata': {}}]
        >>> result = complex_algorithm(data, config)
        >>> print(f"å¤„ç†äº† {len(result.processed_data)} æ¡æ•°æ®")
        å¤„ç†äº† 1 æ¡æ•°æ®

    Note:
        - è¯¥å‡½æ•°è®¡ç®—å¯†é›†å‹ï¼Œå»ºè®®åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œ
        - å¤§æ•°æ®é›†å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´å¤„ç†
        - ç¡®ä¿è¾“å…¥æ•°æ®å·²ç»è¿‡é¢„éªŒè¯

    See Also:
        - simple_algorithm(): ç®€åŒ–ç‰ˆæœ¬çš„ç®—æ³•
        - validate_input_data(): è¾“å…¥æ•°æ®éªŒè¯å‡½æ•°
    """
    # å®ç°ä»£ç ...
```

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•æ ‡å‡†
```python
# âœ… æ­£ç¡®çš„pytestæµ‹è¯•
import pytest
from unittest.mock import Mock, patch
from myapp.services.user_service import UserService
from myapp.models.user import User
from myapp.exceptions import UserNotFoundError

class TestUserService:
    """ç”¨æˆ·æœåŠ¡æµ‹è¯•ç±»"""

    @pytest.fixture
    def user_service(self):
        """åˆ›å»ºç”¨æˆ·æœåŠ¡å®ä¾‹"""
        return UserService()

    @pytest.fixture
    def sample_user(self):
        """åˆ›å»ºç¤ºä¾‹ç”¨æˆ·æ•°æ®"""
        return User(
            id="user-123",
            name="å¼ ä¸‰",
            email="zhangsan@example.com"
        )

    async def test_get_user_success(self, user_service, sample_user):
        """æµ‹è¯•æˆåŠŸè·å–ç”¨æˆ·ä¿¡æ¯"""
        # Given
        with patch.object(user_service.db, 'get_user') as mock_get:
            mock_get.return_value = sample_user

            # When
            result = await user_service.get_user("user-123")

            # Then
            assert result is not None
            assert result.id == "user-123"
            assert result.name == "å¼ ä¸‰"
            mock_get.assert_called_once_with("user-123")

    async def test_get_user_not_found(self, user_service):
        """æµ‹è¯•ç”¨æˆ·ä¸å­˜åœ¨çš„æƒ…å†µ"""
        # Given
        with patch.object(user_service.db, 'get_user') as mock_get:
            mock_get.return_value = None

            # When & Then
            with pytest.raises(UserNotFoundError):
                await user_service.get_user("nonexistent")
```

## ğŸ”§ å·¥å…·é…ç½®è¦æ±‚

### å¿…é¡»é›†æˆçš„å·¥å…·
```json
{
  "python": {
    "formatter": "black",
    "linter": "flake8",
    "type_checker": "mypy",
    "import_sorter": "isort",
    "test_framework": "pytest"
  },
  "typescript": {
    "formatter": "prettier",
    "linter": "eslint",
    "type_checker": "tsc",
    "test_framework": "vitest"
  },
  "git_hooks": {
    "pre_commit": ["lint", "type_check", "test"],
    "pre_push": ["full_test_suite"]
  }
}
```

## âš ï¸ ç¦æ­¢äº‹é¡¹

### ä»£ç è´¨é‡
- âŒ ä½¿ç”¨ `any` ç±»å‹ï¼ˆTypeScriptï¼‰
- âŒ å¿½ç•¥å¼‚å¸¸å¤„ç†
- âŒ ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- âŒ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®åœ¨ç”Ÿäº§ä»£ç ä¸­
- âŒ åˆ›å»ºé‡å¤åŠŸèƒ½çš„æ¨¡å—

### æ€§èƒ½
- âŒ åŒæ­¥IOæ“ä½œï¼ˆåº”ä½¿ç”¨å¼‚æ­¥ï¼‰
- âŒ N+1æ•°æ®åº“æŸ¥è¯¢
- âŒ å†…å­˜æ³„æ¼ä»£ç 
- âŒ æ— é™é€’å½’

### å®‰å…¨
- âŒ SQLæ³¨å…¥æ¼æ´
- âŒ XSSæ”»å‡»æ¼æ´
- âŒ æ˜æ–‡å­˜å‚¨å¯†ç 
- âŒ ä¸å®‰å…¨çš„APIç«¯ç‚¹

---

**å‚è€ƒæ–‡æ¡£**:
- [ä»£ç ä¸€è‡´æ€§æ ‡å‡†](.kiro/specs/code-consistency-standards.md)
- [å¼€å‘è§„èŒƒ](.kiro/steering/development-standards.md)
- [æµ‹è¯•æ ‡å‡†](mdc:docs/testing-standard.md)
# ZK-Agent å¼€å‘è§„èŒƒä¸ä»£ç è´¨é‡æ ‡å‡†

## ğŸ“‹ æ ¸å¿ƒå¼€å‘åŸåˆ™

åŸºäº [ä»£ç ä¸€è‡´æ€§æ ‡å‡†](.kiro/specs/code-consistency-standards.md) å’Œ [å¼€å‘è§„èŒƒ](.kiro/steering/development-standards.md)ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚

### è´¨é‡æ ‡å‡†
- **é›¶å¼‚å¸¸åŸåˆ™**: æ‰€æœ‰ä»£ç å¿…é¡»æœ‰å®Œå–„çš„å¼‚å¸¸å¤„ç†
- **ç±»å‹å®‰å…¨**: TypeScriptä¸¥æ ¼æ¨¡å¼ï¼ŒPythonç±»å‹æ³¨è§£
- **æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•â‰¥80%ï¼Œé›†æˆæµ‹è¯•â‰¥60%ï¼Œå…³é”®è·¯å¾„â‰¥90%
- **ä»£ç å®¡æŸ¥**: æ‰€æœ‰ä»£ç å¿…é¡»é€šè¿‡åŒè¡Œè¯„å®¡

### æ€§èƒ½è¦æ±‚
- **å“åº”æ—¶é—´**: APIå“åº”<200msï¼Œé¡µé¢åŠ è½½<2s
- **å¹¶å‘å¤„ç†**: æ”¯æŒ1000+å¹¶å‘ç”¨æˆ·
- **èµ„æºä¼˜åŒ–**: å†…å­˜ä½¿ç”¨<80%ï¼ŒCPUä½¿ç”¨<70%

## ğŸ Pythonå¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼è§„èŒƒ
```python
# âœ… æ­£ç¡®çš„å‡½æ•°å®šä¹‰ä¸æ³¨é‡Š
def process_user_data(
    user_id: str,
    data: Dict[str, Any],
    options: Optional[ProcessingOptions] = None
) -> ProcessingResult:
    """å¤„ç†ç”¨æˆ·æ•°æ®å¹¶è¿”å›å¤„ç†ç»“æœ

    è¯¥å‡½æ•°è´Ÿè´£å¯¹è¾“å…¥çš„ç”¨æˆ·æ•°æ®è¿›è¡Œæ¸…æ´—ã€éªŒè¯å’Œè½¬æ¢å¤„ç†ã€‚

    Args:
        user_id: ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
        data: å¾…å¤„ç†çš„ç”¨æˆ·æ•°æ®å­—å…¸
            - name: ç”¨æˆ·å§“å
            - email: ç”¨æˆ·é‚®ç®±
            - preferences: ç”¨æˆ·åå¥½è®¾ç½®
        options: å¯é€‰çš„å¤„ç†é…ç½®å‚æ•°

    Returns:
        ProcessingResult: åŒ…å«å¤„ç†ç»“æœå’ŒçŠ¶æ€ä¿¡æ¯
            - success: å¤„ç†æ˜¯å¦æˆåŠŸ
            - data: å¤„ç†åçš„æ•°æ®
            - errors: é”™è¯¯ä¿¡æ¯åˆ—è¡¨

    Raises:
        ValueError: å½“è¾“å…¥æ•°æ®æ ¼å¼ä¸æ­£ç¡®æ—¶æŠ›å‡º
        ValidationError: å½“æ•°æ®éªŒè¯å¤±è´¥æ—¶æŠ›å‡º
        ProcessingError: å½“å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡º

    Examples:
        >>> result = process_user_data(
        ...     "user-123",
        ...     {"name": "å¼ ä¸‰", "email": "zhangsan@example.com"}
        ... )
        >>> print(result.success)
        True
    """
    try:
        # è¾“å…¥éªŒè¯
        if not user_id or not isinstance(user_id, str):
            raise ValueError("ç”¨æˆ·IDå¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²")

        # æ•°æ®å¤„ç†é€»è¾‘
        processed_data = _clean_and_validate_data(data)

        return ProcessingResult(
            success=True,
            data=processed_data,
            errors=[]
        )
    except Exception as e:
        logger.error(f"å¤„ç†ç”¨æˆ·æ•°æ®å¤±è´¥: {user_id}, é”™è¯¯: {str(e)}")
        raise ProcessingError(f"æ•°æ®å¤„ç†å¤±è´¥: {str(e)}") from e
```

### æ–‡ä»¶å‘½åè§„èŒƒ
```python
# âœ… æ­£ç¡®çš„æ–‡ä»¶å‘½å
user_service.py          # ç”¨æˆ·æœåŠ¡
auth_middleware.py       # è®¤è¯ä¸­é—´ä»¶
database_manager.py      # æ•°æ®åº“ç®¡ç†å™¨
ai_model_adapter.py      # AIæ¨¡å‹é€‚é…å™¨
fastgpt_client.py        # FastGPTå®¢æˆ·ç«¯

# âŒ é”™è¯¯çš„æ–‡ä»¶å‘½å
UserService.py           # ä¸ä½¿ç”¨å¤§é©¼å³°
authMiddleware.py        # ä¸ä½¿ç”¨å°é©¼å³°
db-manager.py           # ä¸ä½¿ç”¨è¿å­—ç¬¦
aiModel.py              # ç¼ºä¹æè¿°æ€§
```

### å¼‚æ­¥ç¼–ç¨‹è§„èŒƒ
```python
# âœ… æ­£ç¡®çš„å¼‚æ­¥å‡½æ•°å®šä¹‰
async def fetch_user_profile(user_id: str) -> Optional[UserProfile]:
    """å¼‚æ­¥è·å–ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯"""
    try:
        async with httpx.AsyncClient() as client:
            response = await client.get(f"/users/{user_id}")
            response.raise_for_status()
            return UserProfile(**response.json())
    except httpx.HTTPError as e:
        logger.error(f"è·å–ç”¨æˆ·æ¡£æ¡ˆå¤±è´¥: {user_id}, é”™è¯¯: {str(e)}")
        return None
    except Exception as e:
        logger.error(f"æœªçŸ¥é”™è¯¯: {str(e)}")
        raise
```

## ğŸ“œ TypeScriptå¼€å‘è§„èŒƒ

### ç±»å‹å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„æ¥å£å®šä¹‰
interface UserProfile {
  readonly id: string;
  name: string;
  email: string;
  avatar?: string;
  preferences: UserPreferences;
  createdAt: Date;
  updatedAt: Date;
}

// âœ… æ­£ç¡®çš„è”åˆç±»å‹å®šä¹‰
type AgentStatus = 'idle' | 'processing' | 'error' | 'completed';
type EventHandler<T = any> = (event: T) => void | Promise<void>;

// âœ… æ­£ç¡®çš„æ³›å‹å®šä¹‰
interface ApiResponse<T> {
  success: boolean;
  data: T;
  error?: string;
  timestamp: number;
}
```

### å‡½æ•°å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„å‡½æ•°å®šä¹‰ä¸æ³¨é‡Š
/**
 * å¼‚æ­¥è·å–ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯
 *
 * @param userId - ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
 * @param options - å¯é€‰çš„è·å–é…ç½®
 * @returns Promise<UserProfile | null> - ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯æˆ–null
 *
 * @example
 * ```typescript
 * const profile = await fetchUserProfile('user-123');
 * if (profile) {
 *   console.log(profile.name);
 * }
 * ```
 */
async function fetchUserProfile(
  userId: string,
  options?: FetchOptions
): Promise<UserProfile | null> {
  try {
    const response = await apiClient.get<UserProfile>(`/users/${userId}`, options);
    return response.data;
  } catch (error) {
    console.error('Failed to fetch user profile:', error);
    return null;
  }
}
```

### ç»„ä»¶å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„Reactç»„ä»¶å®šä¹‰
interface UserCardProps {
  user: UserProfile;
  onEdit?: (user: UserProfile) => void;
  onDelete?: (userId: string) => void;
  className?: string;
}

/**
 * ç”¨æˆ·å¡ç‰‡ç»„ä»¶
 *
 * æ˜¾ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ”¯æŒç¼–è¾‘å’Œåˆ é™¤æ“ä½œ
 */
export default function UserCard({
  user,
  onEdit,
  onDelete,
  className
}: UserCardProps) {
  const handleEdit = useCallback(() => {
    onEdit?.(user);
  }, [user, onEdit]);

  const handleDelete = useCallback(() => {
    onDelete?.(user.id);
  }, [user.id, onDelete]);

  return (
    <div className={cn("user-card", className)}>
      <div className="user-avatar">
        <Image
          src={user.avatar || '/default-avatar.png'}
          alt={`${user.name}çš„å¤´åƒ`}
          width={64}
          height={64}
        />
      </div>
      <div className="user-info">
        <h3 className="user-name">{user.name}</h3>
        <p className="user-email">{user.email}</p>
      </div>
      <div className="user-actions">
        {onEdit && (
          <Button onClick={handleEdit} variant="outline" size="sm">
            ç¼–è¾‘
          </Button>
        )}
        {onDelete && (
          <Button onClick={handleDelete} variant="destructive" size="sm">
            åˆ é™¤
          </Button>
        )}
      </div>
    </div>
  );
}
```

## ğŸ“ æ³¨é‡Šä¸æ–‡æ¡£è§„èŒƒ

### å‡½æ•°çº§æ³¨é‡Šè¦æ±‚
```python
def complex_algorithm(
    input_data: List[Dict[str, Any]],
    config: AlgorithmConfig,
    callback: Optional[Callable[[str], None]] = None
) -> AlgorithmResult:
    """å¤æ‚ç®—æ³•å¤„ç†å‡½æ•°

    è¯¥å‡½æ•°å®ç°äº†ä¸€ä¸ªå¤šæ­¥éª¤çš„æ•°æ®å¤„ç†ç®—æ³•ï¼ŒåŒ…æ‹¬æ•°æ®é¢„å¤„ç†ã€
    æ ¸å¿ƒç®—æ³•æ‰§è¡Œå’Œç»“æœåå¤„ç†ã€‚

    ç®—æ³•æ­¥éª¤ï¼š
    1. æ•°æ®éªŒè¯å’Œæ¸…æ´—
    2. ç‰¹å¾æå–å’Œè½¬æ¢
    3. æ ¸å¿ƒç®—æ³•è®¡ç®—
    4. ç»“æœèšåˆå’Œæ ¼å¼åŒ–

    Args:
        input_data: è¾“å…¥æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
            - id: æ•°æ®å”¯ä¸€æ ‡è¯†
            - values: æ•°å€¼æ•°ç»„
            - metadata: å…ƒæ•°æ®å­—å…¸
        config: ç®—æ³•é…ç½®å¯¹è±¡
            - algorithm_type: ç®—æ³•ç±»å‹ ('fast' | 'accurate')
            - threshold: é˜ˆå€¼å‚æ•° (0.0-1.0)
            - max_iterations: æœ€å¤§è¿­ä»£æ¬¡æ•°
        callback: å¯é€‰çš„è¿›åº¦å›è°ƒå‡½æ•°

    Returns:
        AlgorithmResult: ç®—æ³•æ‰§è¡Œç»“æœ
            - processed_data: å¤„ç†åçš„æ•°æ®
            - metrics: æ€§èƒ½æŒ‡æ ‡
            - execution_time: æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰

    Raises:
        ValueError: å½“è¾“å…¥æ•°æ®æ ¼å¼æ— æ•ˆæ—¶
        AlgorithmError: å½“ç®—æ³•æ‰§è¡Œå¤±è´¥æ—¶
        TimeoutError: å½“æ‰§è¡Œè¶…æ—¶æ—¶

    Examples:
        >>> config = AlgorithmConfig(
        ...     algorithm_type='fast',
        ...     threshold=0.8,
        ...     max_iterations=100
        ... )
        >>> data = [{'id': '1', 'values': [1, 2, 3], 'metadata': {}}]
        >>> result = complex_algorithm(data, config)
        >>> print(f"å¤„ç†äº† {len(result.processed_data)} æ¡æ•°æ®")
        å¤„ç†äº† 1 æ¡æ•°æ®

    Note:
        - è¯¥å‡½æ•°è®¡ç®—å¯†é›†å‹ï¼Œå»ºè®®åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œ
        - å¤§æ•°æ®é›†å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´å¤„ç†
        - ç¡®ä¿è¾“å…¥æ•°æ®å·²ç»è¿‡é¢„éªŒè¯

    See Also:
        - simple_algorithm(): ç®€åŒ–ç‰ˆæœ¬çš„ç®—æ³•
        - validate_input_data(): è¾“å…¥æ•°æ®éªŒè¯å‡½æ•°
    """
    # å®ç°ä»£ç ...
```

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•æ ‡å‡†
```python
# âœ… æ­£ç¡®çš„pytestæµ‹è¯•
import pytest
from unittest.mock import Mock, patch
from myapp.services.user_service import UserService
from myapp.models.user import User
from myapp.exceptions import UserNotFoundError

class TestUserService:
    """ç”¨æˆ·æœåŠ¡æµ‹è¯•ç±»"""

    @pytest.fixture
    def user_service(self):
        """åˆ›å»ºç”¨æˆ·æœåŠ¡å®ä¾‹"""
        return UserService()

    @pytest.fixture
    def sample_user(self):
        """åˆ›å»ºç¤ºä¾‹ç”¨æˆ·æ•°æ®"""
        return User(
            id="user-123",
            name="å¼ ä¸‰",
            email="zhangsan@example.com"
        )

    async def test_get_user_success(self, user_service, sample_user):
        """æµ‹è¯•æˆåŠŸè·å–ç”¨æˆ·ä¿¡æ¯"""
        # Given
        with patch.object(user_service.db, 'get_user') as mock_get:
            mock_get.return_value = sample_user

            # When
            result = await user_service.get_user("user-123")

            # Then
            assert result is not None
            assert result.id == "user-123"
            assert result.name == "å¼ ä¸‰"
            mock_get.assert_called_once_with("user-123")

    async def test_get_user_not_found(self, user_service):
        """æµ‹è¯•ç”¨æˆ·ä¸å­˜åœ¨çš„æƒ…å†µ"""
        # Given
        with patch.object(user_service.db, 'get_user') as mock_get:
            mock_get.return_value = None

            # When & Then
            with pytest.raises(UserNotFoundError):
                await user_service.get_user("nonexistent")
```

## ğŸ”§ å·¥å…·é…ç½®è¦æ±‚

### å¿…é¡»é›†æˆçš„å·¥å…·
```json
{
  "python": {
    "formatter": "black",
    "linter": "flake8",
    "type_checker": "mypy",
    "import_sorter": "isort",
    "test_framework": "pytest"
  },
  "typescript": {
    "formatter": "prettier",
    "linter": "eslint",
    "type_checker": "tsc",
    "test_framework": "vitest"
  },
  "git_hooks": {
    "pre_commit": ["lint", "type_check", "test"],
    "pre_push": ["full_test_suite"]
  }
}
```

## âš ï¸ ç¦æ­¢äº‹é¡¹

### ä»£ç è´¨é‡
- âŒ ä½¿ç”¨ `any` ç±»å‹ï¼ˆTypeScriptï¼‰
- âŒ å¿½ç•¥å¼‚å¸¸å¤„ç†
- âŒ ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- âŒ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®åœ¨ç”Ÿäº§ä»£ç ä¸­
- âŒ åˆ›å»ºé‡å¤åŠŸèƒ½çš„æ¨¡å—

### æ€§èƒ½
- âŒ åŒæ­¥IOæ“ä½œï¼ˆåº”ä½¿ç”¨å¼‚æ­¥ï¼‰
- âŒ N+1æ•°æ®åº“æŸ¥è¯¢
- âŒ å†…å­˜æ³„æ¼ä»£ç 
- âŒ æ— é™é€’å½’

### å®‰å…¨
- âŒ SQLæ³¨å…¥æ¼æ´
- âŒ XSSæ”»å‡»æ¼æ´
- âŒ æ˜æ–‡å­˜å‚¨å¯†ç 
- âŒ ä¸å®‰å…¨çš„APIç«¯ç‚¹

---

**å‚è€ƒæ–‡æ¡£**:
- [ä»£ç ä¸€è‡´æ€§æ ‡å‡†](.kiro/specs/code-consistency-standards.md)
- [å¼€å‘è§„èŒƒ](.kiro/steering/development-standards.md)
- [æµ‹è¯•æ ‡å‡†](mdc:docs/testing-standard.md)
